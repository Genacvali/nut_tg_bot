# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Edge Function —Å–æ–∑–¥–∞–Ω–∞?

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://itlqgwevcuoysdmuttwy.supabase.co
2. Edge Functions ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `telegram-webhook`
3. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "Active" (–∑–µ–ª–µ–Ω—ã–π)

**–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ù–ï–¢:**
- –°–æ–∑–¥–∞–π—Ç–µ –µ—ë —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `supabase/functions/telegram-webhook/index.ts`
- –ù–∞–∂–º–∏—Ç–µ Deploy

## –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –°–µ–∫—Ä–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã?

1. Edge Functions ‚Üí Secrets
2. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –í–°–ï 4 —Å–µ–∫—Ä–µ—Ç–∞:
   - `TELEGRAM_BOT_TOKEN` = 7885443438:AAFuWyxKApHly8kl4QJLHr7qGd1w3NQrJHg
   - `OPENAI_API_KEY` = –≤–∞—à –∫–ª—é—á OpenAI
   - `SUPABASE_URL` = https://itlqgwevcuoysdmuttwy.supabase.co
   - `SUPABASE_ANON_KEY` = –≤–∞—à anon –∫–ª—é—á

**–ï—Å–ª–∏ —á–µ–≥–æ-—Ç–æ –Ω–µ—Ç:**
- –ù–∞–∂–º–∏—Ç–µ "Add new secret"
- –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –õ–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏

1. Edge Functions ‚Üí telegram-webhook ‚Üí Logs
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- `Secret not found` ‚Üí —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- `Permission denied` ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å RLS –≤ –±–∞–∑–µ
- `Function not found` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

1. Table Editor ‚Üí –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
   - users
   - meals
   - checkins

**–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü –Ω–µ—Ç:**
- SQL Editor ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ `supabase/migrations/20241022000000_setup_tables.sql`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ 5: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
curl -X POST "https://itlqgwevcuoysdmuttwy.supabase.co/functions/v1/telegram-webhook" \
  -H "Content-Type: application/json" \
  -d '{"message":{"chat":{"id":123},"from":{"id":123,"username":"test"},"text":"/start"}}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{"ok":true}
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
- –°–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –≤ Supabase

---

## üéØ –õ–£–ß–®–ï–ï –†–ï–®–ï–ù–ò–ï: –ü–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º –ø–æ –ø–æ—Ä—è–¥–∫—É –∏ —Å–æ–æ–±—â–∏—Ç–µ, –Ω–∞ –∫–∞–∫–æ–º –∑–∞—Å—Ç—Ä—è–ª–∏.
