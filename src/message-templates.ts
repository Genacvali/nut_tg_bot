// –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–æ–Ω–æ–º (C.I.D.)
// Coach, Mentor, Neutral - —Ç—Ä–∏ —Å—Ç–∏–ª—è –æ–±—â–µ–Ω–∏—è

// –¢–∏–ø—ã –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
type Tone = 'coach' | 'mentor' | 'neutral';

interface MessageTemplate {
  coach: string;
  mentor: string;
  neutral: string;
}

interface PlanCardData {
  tdee: number;
  targetCalories: number;
  protein: number;
  fat: number;
  carbs: number;
  goal: string;
}

interface DaySummaryData {
  calories: number;
  targetCalories: number;
  protein: number;
  targetProtein: number;
  fat: number;
  targetFat: number;
  carbs: number;
  targetCarbs: number;
  advice: string;
}

// –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

/**
 * –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–ª–∞–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è
 */
export function getPlanCard(data: PlanCardData, tone: Tone): string {
  const templates: MessageTemplate = {
    coach: `üí™ –í–ê–® –ü–õ–ê–ù –ü–ò–¢–ê–ù–ò–Ø

üî• TDEE: ${data.tdee} –∫–∫–∞–ª ‚Üí —Ü–µ–ª—å ${data.goal} = ${data.targetCalories}
ü•© –ë–µ–ª–æ–∫: ${data.protein}–≥ ¬∑ ü•ë –ñ–∏—Ä—ã: ${data.fat}–≥ ¬∑ üçû –£–≥–ª–∏: ${data.carbs}–≥

[ –ü—Ä–∏–Ω—è—Ç—å ]   [ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ]

üí™ –ì–æ—Ç–æ–≤—ã –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º? –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ!`,
    
    mentor: `üéØ –í–ê–® –ü–õ–ê–ù –ü–ò–¢–ê–ù–ò–Ø

üìä TDEE: ${data.tdee} –∫–∫–∞–ª ‚Üí —Ü–µ–ª—å ${data.goal} = ${data.targetCalories}
ü•© –ë–µ–ª–æ–∫: ${data.protein}–≥ ¬∑ ü•ë –ñ–∏—Ä—ã: ${data.fat}–≥ ¬∑ üçû –£–≥–ª–∏: ${data.carbs}–≥

[ –ü—Ä–∏–Ω—è—Ç—å ]   [ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ]

üéØ –≠—Ç–æ—Ç –ø–ª–∞–Ω –ø–æ–º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏—á—å –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π.`,
    
    neutral: `üìä –í–ê–® –ü–õ–ê–ù –ü–ò–¢–ê–ù–ò–Ø

TDEE: ${data.tdee} –∫–∫–∞–ª ‚Üí —Ü–µ–ª—å ${data.goal} = ${data.targetCalories}
–ë–µ–ª–æ–∫: ${data.protein}–≥ ¬∑ –ñ–∏—Ä—ã: ${data.fat}–≥ ¬∑ –£–≥–ª–µ–≤–æ–¥—ã: ${data.carbs}–≥

[ –ü—Ä–∏–Ω—è—Ç—å ]   [ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ]

–ü–ª–∞–Ω —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.`
  };
  
  return templates[tone];
}

/**
 * –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Ç–æ–≥–∞ –¥–Ω—è
 */
export function getDaySummaryCard(data: DaySummaryData, tone: Tone): string {
  const caloriesProgress = Math.round((data.calories / data.targetCalories) * 100);
  const proteinProgress = Math.round((data.protein / data.targetProtein) * 100);
  const fatProgress = Math.round((data.fat / data.targetFat) * 100);
  const carbsProgress = Math.round((data.carbs / data.targetCarbs) * 100);
  
  const templates: MessageTemplate = {
    coach: `üí™ –ò–¢–û–ì –î–ù–Ø

–°–µ–≥–æ–¥–Ω—è: ${data.calories} / ${data.targetCalories} –∫–∫–∞–ª
–ë ${data.protein}/${data.targetProtein} ¬∑ –ñ ${data.fat}/${data.targetFat} ¬∑ –£ ${data.carbs}/${data.targetCarbs}

üí° –°–æ–≤–µ—Ç: ${data.advice}

–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!`,
    
    mentor: `üìä –ò–¢–û–ì –î–ù–Ø

–°–µ–≥–æ–¥–Ω—è: ${data.calories} / ${data.targetCalories} –∫–∫–∞–ª
–ë ${data.protein}/${data.targetProtein} ¬∑ –ñ ${data.fat}/${data.targetFat} ¬∑ –£ ${data.carbs}/${data.targetCarbs}

üí° –°–æ–≤–µ—Ç: ${data.advice}

–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞!`,
    
    neutral: `üìä –ò–¢–û–ì –î–ù–Ø

–°–µ–≥–æ–¥–Ω—è: ${data.calories} / ${data.targetCalories} –∫–∫–∞–ª
–ë ${data.protein}/${data.targetProtein} ¬∑ –ñ ${data.fat}/${data.targetFat} ¬∑ –£ ${data.carbs}/${data.targetCarbs}

–°–æ–≤–µ—Ç: ${data.advice}`
  };
  
  return templates[tone];
}

/**
 * –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
 */
export function getConfirmationMessage(action: string, tone: Tone): string {
  const templates: Record<string, MessageTemplate> = {
    profile_saved: {
      coach: '‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω! –ì–æ—Ç–æ–≤—ã —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω? üí™',
      mentor: '‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –ì–æ—Ç–æ–≤ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω?',
      neutral: '‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –ì–æ—Ç–æ–≤ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω?'
    },
    plan_updated: {
      coach: '‚öôÔ∏è –ü–ª–∞–Ω –æ–±–Ω–æ–≤–ª—ë–Ω! –ë–µ–ª–æ–∫ +20–≥ ‚Üí –£–≥–ª–∏ ‚àí80–≥. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º! üí™',
      mentor: '‚öôÔ∏è –ü–ª–∞–Ω –æ–±–Ω–æ–≤–ª—ë–Ω: –ë–µ–ª–æ–∫ +20–≥ ‚Üí –£–≥–ª–µ–≤–æ–¥—ã ‚àí80–≥.',
      neutral: '‚öôÔ∏è –ü–ª–∞–Ω –æ–±–Ω–æ–≤–ª—ë–Ω: –ë–µ–ª–æ–∫ +20–≥ ‚Üí –£–≥–ª–µ–≤–æ–¥—ã ‚àí80–≥.'
    },
    meal_added: {
      coach: 'üçΩÔ∏è –ü—Ä–∏—ë–º –ø–∏—â–∏ –¥–æ–±–∞–≤–ª–µ–Ω! –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä! üí™',
      mentor: 'üçΩÔ∏è –ü—Ä–∏—ë–º –ø–∏—â–∏ –¥–æ–±–∞–≤–ª–µ–Ω. –•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä!',
      neutral: 'üçΩÔ∏è –ü—Ä–∏—ë–º –ø–∏—â–∏ –¥–æ–±–∞–≤–ª–µ–Ω.'
    },
    reminder_set: {
      coach: '‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –ù–µ –∑–∞–±—É–¥–µ–º –æ —Ü–µ–ª—è—Ö! üí™',
      mentor: '‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –ü–æ–º–æ–∂–µ—Ç –Ω–µ –∑–∞–±—ã—Ç—å.',
      neutral: '‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.'
    }
  };
  
  return templates[action]?.[tone] || '‚úÖ –î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.';
}

/**
 * –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö (–¥—Ä—É–∂–µ–ª—é–±–Ω–æ)
 */
export function getErrorMessage(error: string, tone: Tone): string {
  const templates: Record<string, MessageTemplate> = {
    save_error: {
      coach: '‚ùå –ù–µ —Å–º–æ–≥ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑! üí™',
      mentor: '‚ùå –ù–µ —Å–º–æ–≥ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.',
      neutral: '‚ùå –ù–µ —Å–º–æ–≥ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.'
    },
    low_fat: {
      coach: '‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π –∂–∏—Ä! –ú–∏–Ω–∏–º—É–º 0.6 –≥/–∫–≥ ‚Äî –∏—Å–ø—Ä–∞–≤–∏–ª –ø–ª–∞–Ω! üí™',
      mentor: '‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π –∂–∏—Ä. –ú–∏–Ω–∏–º—É–º 0.6 –≥/–∫–≥ ‚Äî –ø–æ–¥–ø—Ä–∞–≤–∏–ª –ø–ª–∞–Ω.',
      neutral: '‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π –∂–∏—Ä. –ú–∏–Ω–∏–º—É–º 0.6 –≥/–∫–≥ ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.'
    },
    low_protein: {
      coach: '‚ö†Ô∏è –ú–∞–ª–æ –±–µ–ª–∫–∞! –ú–∏–Ω–∏–º—É–º 1.4 –≥/–∫–≥ ‚Äî –¥–æ–±–∞–≤–∏–ª –≤ –ø–ª–∞–Ω! üí™',
      mentor: '‚ö†Ô∏è –ú–∞–ª–æ –±–µ–ª–∫–∞. –ú–∏–Ω–∏–º—É–º 1.4 –≥/–∫–≥ ‚Äî —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª –ø–ª–∞–Ω.',
      neutral: '‚ö†Ô∏è –ú–∞–ª–æ –±–µ–ª–∫–∞. –ú–∏–Ω–∏–º—É–º 1.4 –≥/–∫–≥ ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.'
    },
    voice_error: {
      coach: 'üé§ –ù–µ —Å–º–æ–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≥–æ–ª–æ—Å! –ì–æ–≤–æ—Ä–∏ —á—ë—Ç—á–µ! üí™',
      mentor: 'üé§ –ù–µ —Å–º–æ–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≥–æ–ª–æ—Å. –ü–æ–ø—Ä–æ–±—É–π –≥–æ–≤–æ—Ä–∏—Ç—å —á—ë—Ç—á–µ.',
      neutral: 'üé§ –ù–µ —Å–º–æ–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≥–æ–ª–æ—Å. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.'
    },
    network_error: {
      coach: 'üåê –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é! –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ! üí™',
      mentor: 'üåê –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ.',
      neutral: 'üåê –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ.'
    }
  };
  
  return templates[error]?.[tone] || '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.';
}

/**
 * –°–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"
 */
export function getRetryMessage(error: string, tone: Tone): { message: string; button: string } {
  const baseMessage = getErrorMessage(error, tone);
  
  const buttonTexts = {
    coach: 'üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å!',
    mentor: 'üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
    neutral: 'üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å'
  };
  
  return {
    message: baseMessage,
    button: buttonTexts[tone]
  };
}

/**
 * –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
 */
export function getWelcomeMessage(tone: Tone, isNewUser: boolean = false): string {
  if (isNewUser) {
    const templates: MessageTemplate = {
      coach: `üçé –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI –±–æ—Ç–∞-–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞!

üí™ –Ø —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –ø–æ –ø–∏—Ç–∞–Ω–∏—é!

üéØ –ß–¢–û –Ø –£–ú–ï–Æ:
‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –µ–¥—É –∏–∑ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ –∏ –≥–æ–ª–æ—Å–∞
‚Ä¢ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã –ö–ë–ñ–£
‚Ä¢ –°–æ—Å—Ç–∞–≤–ª—è—é –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è—é –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

üöÄ –ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å? –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ!`,
      
      mentor: `üçé –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI –±–æ—Ç–∞-–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞!

üéØ –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø–∏—Ç–∞–Ω–∏—é.

üìä –ß–¢–û –Ø –£–ú–ï–Æ:
‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –µ–¥—É –∏–∑ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ –∏ –≥–æ–ª–æ—Å–∞
‚Ä¢ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã –ö–ë–ñ–£
‚Ä¢ –°–æ—Å—Ç–∞–≤–ª—è—é –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è—é –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–µ–π!`,
      
      neutral: `üçé –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI –±–æ—Ç–∞-–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞!

–Ø –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø–∏—Ç–∞–Ω–∏—é.

–§—É–Ω–∫—Ü–∏–∏:
‚Ä¢ –ê–Ω–∞–ª–∏–∑ –µ–¥—ã –∏–∑ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ –∏ –≥–æ–ª–æ—Å–∞
‚Ä¢ –†–∞—Å—á—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–æ—Ä–º –ö–ë–ñ–£
‚Ä¢ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

–ù–∞—á–Ω—ë–º —Ä–∞–±–æ—Ç—É!`
    };
    
    return templates[tone];
  }
  
  // –í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  const templates: MessageTemplate = {
    coach: 'üí™ –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º?',
    mentor: 'üéØ –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –ö–∞–∫ –¥–µ–ª–∞ —Å —Ü–µ–ª—è–º–∏?',
    neutral: 'üìä –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É.'
  };
  
  return templates[tone];
}

/**
 * –°–æ–æ–±—â–µ–Ω–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
 */
export function getOnboardingMessage(step: string, tone: Tone): string {
  const stepMessages: Record<string, MessageTemplate> = {
    age: {
      coach: 'üëã –ü—Ä–∏–≤–µ—Ç! –î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –Ω—É–∂–Ω—ã —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ!\n\nüìÖ –°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?',
      mentor: 'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –Ω—É–∂–Ω—ã –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ.\n\nüìÖ –°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?',
      neutral: 'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.\n\nüìÖ –°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?'
    },
    sex: {
      coach: 'üë§ –£–∫–∞–∂–∏ —Å–≤–æ–π –ø–æ–ª:\n\n‚Ä¢ –ú—É–∂—Å–∫–æ–π\n‚Ä¢ –ñ–µ–Ω—Å–∫–∏–π',
      mentor: 'üë§ –£–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª:\n\n‚Ä¢ –ú—É–∂—Å–∫–æ–π\n‚Ä¢ –ñ–µ–Ω—Å–∫–∏–π',
      neutral: 'üë§ –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª:\n\n‚Ä¢ –ú—É–∂—Å–∫–æ–π\n‚Ä¢ –ñ–µ–Ω—Å–∫–∏–π'
    },
    height: {
      coach: 'üìè –ö–∞–∫–æ–π —É —Ç–µ–±—è —Ä–æ—Å—Ç –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö?\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 175',
      mentor: 'üìè –ö–∞–∫–æ–π —É –≤–∞—Å —Ä–æ—Å—Ç –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö?\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 175',
      neutral: 'üìè –†–æ—Å—Ç –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö:\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 175'
    },
    weight: {
      coach: '‚öñÔ∏è –ö–∞–∫–æ–π —É —Ç–µ–±—è —Ç–µ–∫—É—â–∏–π –≤–µ—Å –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö?\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 70',
      mentor: '‚öñÔ∏è –ö–∞–∫–æ–π —É –≤–∞—Å —Ç–µ–∫—É—â–∏–π –≤–µ—Å –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö?\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 70',
      neutral: '‚öñÔ∏è –¢–µ–∫—É—â–∏–π –≤–µ—Å –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö:\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 70'
    },
    activity: {
      coach: 'üèÉ‚Äç‚ôÇÔ∏è –ö–∞–∫–æ–π —É —Ç–µ–±—è —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏?\n\n‚Ä¢ –ú–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω—ã–π (–æ—Ñ–∏—Å)\n‚Ä¢ –õ—ë–≥–∫–∞—è (1-3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–Ω–µ–¥–µ–ª—è)\n‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–∞—è (3-5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫/–Ω–µ–¥–µ–ª—è)\n‚Ä¢ –í—ã—Å–æ–∫–∞—è (6-7 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫/–Ω–µ–¥–µ–ª—è)\n‚Ä¢ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (2+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–¥–µ–Ω—å)',
      mentor: 'üèÉ‚Äç‚ôÇÔ∏è –ö–∞–∫–æ–π —É –≤–∞—Å —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏?\n\n‚Ä¢ –ú–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω—ã–π (–æ—Ñ–∏—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞)\n‚Ä¢ –õ—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (1-3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–Ω–µ–¥–µ–ª—è)\n‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (3-5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫/–Ω–µ–¥–µ–ª—è)\n‚Ä¢ –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (6-7 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫/–Ω–µ–¥–µ–ª—è)\n‚Ä¢ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (2+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–¥–µ–Ω—å)',
      neutral: 'üèÉ‚Äç‚ôÇÔ∏è –£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:\n\n‚Ä¢ –ú–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω—ã–π\n‚Ä¢ –õ—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n‚Ä¢ –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n‚Ä¢ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'
    },
    goal: {
      coach: 'üéØ –ö–∞–∫—É—é —Ü–µ–ª—å —Ç—ã –ø—Ä–µ—Å–ª–µ–¥—É–µ—à—å?\n\n‚Ä¢ –ü–æ—Ö—É–¥–µ–Ω–∏–µ (—Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å)\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞\n‚Ä¢ –ù–∞–±–æ—Ä –º–∞—Å—Å—ã',
      mentor: 'üéØ –ö–∞–∫—É—é —Ü–µ–ª—å –≤—ã –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç–µ?\n\n‚Ä¢ –ü–æ—Ö—É–¥–µ–Ω–∏–µ (—Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å)\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞\n‚Ä¢ –ù–∞–±–æ—Ä –º–∞—Å—Å—ã',
      neutral: 'üéØ –¶–µ–ª—å:\n\n‚Ä¢ –ü–æ—Ö—É–¥–µ–Ω–∏–µ\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞\n‚Ä¢ –ù–∞–±–æ—Ä –º–∞—Å—Å—ã'
    }
  };
  
  return stepMessages[step]?.[tone] || '–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É...';
}

/**
 * –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–º–æ—â–∏
 */
export function getHelpMessage(tone: Tone): string {
  const templates: MessageTemplate = {
    coach: `‚ùì –ü–û–ú–û–©–¨ –ü–û –ë–û–¢–£

üí™ –ß–¢–û –Ø –£–ú–ï–Æ:
‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –µ–¥—É –∏–∑ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ –∏ –≥–æ–ª–æ—Å–∞
‚Ä¢ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã –ö–ë–ñ–£
‚Ä¢ –°–æ—Å—Ç–∞–≤–ª—è—é –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è—é –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

üöÄ –ö–ê–ö –ü–û–õ–¨–ó–û–í–ê–¢–¨–°–Ø:
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–π –æ–ø–∏—Å–∞–Ω–∏–µ –µ–¥—ã: "–µ–ª –∫—É—Ä–∏—Ü—É —Å —Ä–∏—Å–æ–º"
‚Ä¢ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π –±–ª—é–¥–∞
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚Ä¢ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ!`,
    
    mentor: `‚ùì –ü–æ–º–æ—â—å –ø–æ –±–æ—Ç—É

üéØ –ß—Ç–æ —è —É–º–µ—é:
‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –µ–¥—É –∏–∑ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ –∏ –≥–æ–ª–æ—Å–∞
‚Ä¢ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã –ö–ë–ñ–£
‚Ä¢ –°–æ—Å—Ç–∞–≤–ª—è—é –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è—é –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

üìù –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –µ–¥—ã: "–µ–ª –∫—É—Ä–∏—Ü—É —Å —Ä–∏—Å–æ–º"
‚Ä¢ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –±–ª—é–¥–∞
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚Ä¢ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ!`,
    
    neutral: `‚ùì –ü–æ–º–æ—â—å –ø–æ –±–æ—Ç—É

–§—É–Ω–∫—Ü–∏–∏:
‚Ä¢ –ê–Ω–∞–ª–∏–∑ –µ–¥—ã –∏–∑ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ –∏ –≥–æ–ª–æ—Å–∞
‚Ä¢ –†–∞—Å—á—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–æ—Ä–º –ö–ë–ñ–£
‚Ä¢ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –µ–¥—ã
‚Ä¢ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –±–ª—é–¥–∞
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚Ä¢ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ.`
  };
  
  return templates[tone];
}

/**
 * –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
 */
export function getVoiceResponse(intent: string, tone: Tone): string {
  const templates: Record<string, MessageTemplate> = {
    meal_add: {
      coach: 'üçΩÔ∏è –î–æ–±–∞–≤–ª—è—é –ø—Ä–∏—ë–º –ø–∏—â–∏! –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä! üí™',
      mentor: 'üçΩÔ∏è –î–æ–±–∞–≤–ª—è—é –ø—Ä–∏—ë–º –ø–∏—â–∏. –•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä!',
      neutral: 'üçΩÔ∏è –î–æ–±–∞–≤–ª—è—é –ø—Ä–∏—ë–º –ø–∏—â–∏.'
    },
    weight_update: {
      coach: '‚öñÔ∏è –û–±–Ω–æ–≤–ª—è—é –≤–µ—Å! –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å! üí™',
      mentor: '‚öñÔ∏è –û–±–Ω–æ–≤–ª—è—é –≤–µ—Å. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å.',
      neutral: '‚öñÔ∏è –û–±–Ω–æ–≤–ª—è—é –≤–µ—Å.'
    },
    macro_adjust: {
      coach: '‚öôÔ∏è –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é –º–∞–∫—Ä–æ—Å—ã! –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–¥ —Ç–µ–±—è! üí™',
      mentor: '‚öôÔ∏è –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é –º–∞–∫—Ä–æ—Å—ã. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–¥ –≤–∞—Å.',
      neutral: '‚öôÔ∏è –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é –º–∞–∫—Ä–æ—Å—ã.'
    },
    reminder_set: {
      coach: '‚è∞ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ! –ù–µ –∑–∞–±—É–¥–µ–º –æ —Ü–µ–ª—è—Ö! üí™',
      mentor: '‚è∞ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ. –ü–æ–º–æ–∂–µ—Ç –Ω–µ –∑–∞–±—ã—Ç—å.',
      neutral: '‚è∞ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ.'
    },
    unclear: {
      coach: 'ü§î –ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª! –ü–æ–ø—Ä–æ–±—É–π —Å–∫–∞–∑–∞—Ç—å:\n‚Ä¢ "–î–æ–±–∞–≤—å –∫—É—Ä–∏—Ü—É 200 –∫–∫–∞–ª"\n‚Ä¢ "–û–±–Ω–æ–≤–∏ –≤–µ—Å 75 –∫–≥"\n‚Ä¢ "–ü–µ—Ä–µ—Å—á–∏—Ç–∞–π –º–∞–∫—Ä–æ—Å—ã: –±–µ–ª–æ–∫ +20–≥"\n‚Ä¢ "–ü–æ—Å—Ç–∞–≤—å –æ—Ç—á—ë—Ç –Ω–∞ 21:00"',
      mentor: 'ü§î –ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞–∑–∞—Ç—å:\n‚Ä¢ "–î–æ–±–∞–≤—å –∫—É—Ä–∏—Ü—É 200 –∫–∫–∞–ª"\n‚Ä¢ "–û–±–Ω–æ–≤–∏ –≤–µ—Å 75 –∫–≥"\n‚Ä¢ "–ü–µ—Ä–µ—Å—á–∏—Ç–∞–π –º–∞–∫—Ä–æ—Å—ã: –±–µ–ª–æ–∫ +20–≥"\n‚Ä¢ "–ü–æ—Å—Ç–∞–≤—å –æ—Ç—á—ë—Ç –Ω–∞ 21:00"',
      neutral: 'ü§î –ù–µ –ø–æ–Ω—è–ª. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:\n‚Ä¢ "–î–æ–±–∞–≤—å –∫—É—Ä–∏—Ü—É 200 –∫–∫–∞–ª"\n‚Ä¢ "–û–±–Ω–æ–≤–∏ –≤–µ—Å 75 –∫–≥"\n‚Ä¢ "–ü–µ—Ä–µ—Å—á–∏—Ç–∞–π –º–∞–∫—Ä–æ—Å—ã: –±–µ–ª–æ–∫ +20–≥"\n‚Ä¢ "–ü–æ—Å—Ç–∞–≤—å –æ—Ç—á—ë—Ç –Ω–∞ 21:00"'
    }
  };
  
  return templates[intent]?.[tone] || '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –∑–∞–ø—Ä–æ—Å...';
}

/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
 */
export function getUserTone(userTone?: string): Tone {
  if (userTone === 'coach' || userTone === 'mentor' || userTone === 'neutral') {
    return userTone;
  }
  return 'mentor'; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
}

export default {
  getPlanCard,
  getDaySummaryCard,
  getConfirmationMessage,
  getErrorMessage,
  getRetryMessage,
  getWelcomeMessage,
  getOnboardingMessage,
  getHelpMessage,
  getVoiceResponse,
  getUserTone
};
