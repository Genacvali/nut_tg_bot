# üì¢ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üöÄ –®–∞–≥–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏

### 1. –ó–∞–¥–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏—é (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª)
```bash
# –í Supabase Dashboard ‚Üí Edge Functions
# –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é: broadcast-message
# –°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥ –∏–∑: supabase/functions/broadcast-message/index.ts
```

### 2. –ü—Ä–∏–º–µ–Ω–∏ SQL –º–∏–≥—Ä–∞—Ü–∏—é
```sql
-- –í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏:
-- –§–∞–π–ª: supabase/migration/add_broadcast_helpers.sql
```

### 3. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```sql
-- –ü–æ—Å–º–æ—Ç—Ä–∏ —Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ª—É—á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
SELECT get_broadcast_stats();
```

### 4. –û—Ç–ø—Ä–∞–≤—å —Ä–∞—Å—Å—ã–ª–∫—É

**–ó–∞–º–µ–Ω–∏ YOUR_PROJECT –∏ YOUR_SERVICE_KEY –Ω–∞ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è!**

```bash
curl -X POST 'https://YOUR_PROJECT.supabase.co/functions/v1/broadcast-message' \
  -H 'Authorization: Bearer YOUR_SERVICE_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "message": "üéâ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ C.I.D. v2.0!**\n\n–ü—Ä–∏–≤–µ—Ç! –ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –∫—Ä—É—Ç—ã–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:\n\nüî• **Streak —Å–∏—Å—Ç–µ–º–∞** - –Ω–µ —Ç–µ—Ä—è–π —Å–µ—Ä–∏—é –¥–Ω–µ–π!\n‚ö° **–ë—ã—Å—Ç—Ä—ã–π –ª–æ–≥** - —Å–æ—Ö—Ä–∞–Ω—è–π —á–∞—Å—Ç—ã–µ –±–ª—é–¥–∞\nüìà **–ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–æ—Ä–∏–π –∏ –≤–µ—Å–∞\nüõí **–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫** - –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–µ–≥–æ –ø–ª–∞–Ω–∞\nüìä **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ AI-–æ—Ç—á–µ—Ç—ã** - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞\n‚è∞ **–£–º–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** - AI –ø–æ–º–æ—â–Ω–∏–∫\n\nüí° **–û–±–Ω–æ–≤–∏ –±–æ—Ç –∫–æ–º–∞–Ω–¥–æ–π /start —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –Ω–æ–≤–∏–Ω–∫–∏!**\n\n–¢–µ–ø–µ—Ä—å –ø—É—Ç—å –∫ —Ü–µ–ª–∏ —Å—Ç–∞–ª –µ—â–µ –ø—Ä–æ—â–µ! üí™",
    "onlyActiveSubscribers": false,
    "delayMs": 150,
    "keyboard": [
      [{"text": "üöÄ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–æ–≤–∏–Ω–∫–∏", "callback_data": "main_menu"}],
      [{"text": "üë§ –ü—Ä–æ—Ñ–∏–ª—å", "callback_data": "show_profile"}]
    ]
  }'
```

---

## üìù –ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

–°–º–æ—Ç—Ä–∏ —Ñ–∞–π–ª **BROADCAST_EXAMPLE.md** –¥–ª—è:
- 3 –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–∞ (–∫–æ—Ä–æ—Ç–∫–∏–π, –ø–æ–¥—Ä–æ–±–Ω—ã–π, –¥–ª—è trial)
- –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- Best practices

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–æ—Ç–ø—Ä–∞–≤—å —Ç–æ–ª—å–∫–æ —Å–µ–±–µ)

–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ —Å–µ–±–µ:

```bash
# –ù–∞–π–¥–∏ —Å–≤–æ–π telegram_id –≤ —Ç–∞–±–ª–∏—Ü–µ users
SELECT id, telegram_id, first_name FROM users WHERE telegram_id = YOUR_TELEGRAM_ID;

# –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram bot API –Ω–∞–ø—Ä—è–º—É—é
curl -X POST 'https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage' \
  -H 'Content-Type: application/json' \
  -d '{
    "chat_id": YOUR_TELEGRAM_ID,
    "text": "üéâ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ C.I.D. v2.0!**\n\n...",
    "parse_mode": "Markdown"
  }'
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª—É—á–∏—à—å –æ—Ç–≤–µ—Ç:
```json
{
  "success": true,
  "total_users": 150,
  "sent": 148,
  "failed": 2
}
```

---

**‚ö†Ô∏è –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –Ω–∞ —Å–µ–±–µ, –ø–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–π –≤—Å–µ–º!**
